@model cnu_cinema_practice.ViewModels.Home.HomeIndexViewModel
@{
    ViewData["Title"] = "Home - Test";
}

<div class="container py-5">
    <h1>âœ… Home Controller Test Page</h1>
    
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h2>Featured Movie</h2>
        </div>
        <div class="card-body">
            @if (Model.FeaturedMovie != null)
            {
                <h3>@Model.FeaturedMovie.Name</h3>
                <p><strong>ID:</strong> @Model.FeaturedMovie.Id</p>
                <p><strong>Genre:</strong> @Model.FeaturedMovie.Genre</p>
                <p><strong>Duration:</strong> @Model.FeaturedMovie.FormattedDuration</p>
                <p><strong>Rating:</strong> @Model.FeaturedMovie.ImdbRating</p>
                <p><strong>Poster URL:</strong> @(string.IsNullOrEmpty(Model.FeaturedMovie.PosterUrl) ? "(No poster)" : Model.FeaturedMovie.PosterUrl)</p>
                @if (!string.IsNullOrEmpty(Model.FeaturedMovie.PosterUrl))
                {
                    <img src="@Model.FeaturedMovie.PosterUrl" alt="@Model.FeaturedMovie.Name" style="max-width: 200px;" class="mt-2" />
                }
                <p><strong>Sessions Count:</strong> @Model.FeaturedMovie.Sessions.Count</p>
            }
            else
            {
                <p class="text-danger">No featured movie</p>
            }
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h2>All Movies (@Model.Movies.Count)</h2>
        </div>
        <div class="card-body">
            @if (Model.Movies.Any())
            {
                <div class="row">
                    @foreach (var movie in Model.Movies.Take(3))
                    {
                        <div class="col-md-4 mb-3">
                            <div class="border p-3">
                                <h5>@movie.Name</h5>
                                @if (!string.IsNullOrEmpty(movie.PosterUrl))
                                {
                                    <img src="@movie.PosterUrl" alt="@movie.Name" style="max-width: 100%; max-height: 300px; object-fit: cover;" class="mb-2" />
                                }
                                else
                                {
                                    <p class="text-muted">(No poster)</p>
                                }
                                <p>Genre: @movie.Genre</p>
                                <p>Duration: @movie.FormattedDuration</p>
                                <p>Sessions: @movie.Sessions.Count</p>
                                @if (movie.Sessions.Any())
                                {
                                    <small>Times: @string.Join(", ", movie.Sessions.Select(s => s.FormattedTime))</small>
                                }
                            </div>
                        </div>
                    }
                </div>
                @if (Model.Movies.Count > 3)
                {
                    <p class="text-muted">... and @(Model.Movies.Count - 3) more movies</p>
                }
            }
            else
            {
                <p class="text-danger">No movies found</p>
            }
        </div>
    </div>

    <div class="card">
        <div class="card-header bg-info text-white">
            <h2>Coming Soon (@Model.UpcomingMovies.Count movies)</h2>
        </div>
        <div class="card-body">
            @if (Model.UpcomingMovies.Any())
            {
                <div class="row">
                    @foreach (var movie in Model.UpcomingMovies.Take(3))
                    {
                        <div class="col-md-4 mb-3">
                            <div class="border p-3">
                                <h5>@movie.Name</h5>
                                @if (!string.IsNullOrEmpty(movie.PosterUrl))
                                {
                                    <img src="@movie.PosterUrl" alt="@movie.Name" style="max-width: 100%; max-height: 300px; object-fit: cover;" class="mb-2" />
                                }
                                else
                                {
                                    <p class="text-muted">(No poster)</p>
                                }
                                <p>Genre: @movie.Genre</p>
                                <p>Rating: @movie.FormattedRating</p>
                                <p>Duration: @movie.FormattedDuration</p>
                                <p>Release Date: @movie.ReleaseDate.ToString("MMM dd, yyyy")</p>
                            </div>
                        </div>
                    }
                </div>
                @if (Model.UpcomingMovies.Count > 3)
                {
                    <p class="text-muted">... and @(Model.UpcomingMovies.Count - 3) more</p>
                }
            }
            else
            {
                <p class="text-danger">No upcoming movies</p>
            }
        </div>
    </div>
</div>
